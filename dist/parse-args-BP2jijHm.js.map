{"version":3,"file":"parse-args-BP2jijHm.js","names":["parseArgs","argv: string[]","result: ParsedArgs","parsedArgs: ParsedArgs"],"sources":["../src/parse-args.ts"],"sourcesContent":["import { parseArgs as nodeParseArgs } from 'node:util';\nimport type { ParsedArgs } from './types.js';\n\nexport function parseArgs(argv: string[]): ParsedArgs {\n  const result: ParsedArgs = {\n    includePatterns: [],\n    command: null,\n    commandArgs: [],\n    rawArgs: []\n  };\n\n  // Legacy cmd: support - check first\n  const cmdIndex = argv.findIndex(arg => arg.startsWith('cmd:'));\n  if (cmdIndex !== -1) {\n    result.command = argv[cmdIndex].slice(4);\n    result.commandArgs = argv.slice(cmdIndex + 1);\n    return result;\n  }\n\n  // Find -- separator\n  const dashIndex = argv.indexOf('--');\n  const argsToParseIndex = dashIndex === -1 ? argv.length : dashIndex;\n  const argsToParse = argv.slice(0, argsToParseIndex);\n  \n  // Parse with node:util parseArgs\n  const { values, positionals } = nodeParseArgs({\n    args: argsToParse,\n    options: {\n      include: {\n        type: 'string',\n        multiple: true,\n        default: []\n      }\n    },\n    strict: false,\n    allowPositionals: true\n  });\n\n  // Handle include patterns\n  if (values.include) {\n    result.includePatterns = Array.isArray(values.include) ? values.include : [values.include];\n  }\n\n  // Handle command after --\n  if (dashIndex !== -1 && dashIndex < argv.length - 1) {\n    result.command = argv[dashIndex + 1];\n    result.commandArgs = argv.slice(dashIndex + 2);\n  }\n\n  result.rawArgs = positionals;\n\n  return result;\n}\n\nexport function buildCommand(parsedArgs: ParsedArgs): { command: string; args: string[] } {\n  if (parsedArgs.command) {\n    return {\n      command: parsedArgs.command,\n      args: parsedArgs.commandArgs\n    };\n  }\n  \n  // Default to running the local server\n  return {\n    command: \"node\",\n    args: [\"dist/server.js\"]\n  };\n}"],"mappings":";;;AAGA,SAAgBA,YAAUC,MAA4B;CACpD,MAAMC,SAAqB;EACzB,iBAAiB,CAAE;EACnB,SAAS;EACT,aAAa,CAAE;EACf,SAAS,CAAE;CACZ;CAGD,MAAM,WAAW,KAAK,UAAU,SAAO,IAAI,WAAW,OAAO,CAAC;AAC9D,KAAI,aAAa,IAAI;AACnB,SAAO,UAAU,KAAK,UAAU,MAAM,EAAE;AACxC,SAAO,cAAc,KAAK,MAAM,WAAW,EAAE;AAC7C,SAAO;CACR;CAGD,MAAM,YAAY,KAAK,QAAQ,KAAK;CACpC,MAAM,mBAAmB,cAAc,KAAK,KAAK,SAAS;CAC1D,MAAM,cAAc,KAAK,MAAM,GAAG,iBAAiB;CAGnD,MAAM,EAAE,QAAQ,aAAa,GAAG,UAAc;EAC5C,MAAM;EACN,SAAS,EACP,SAAS;GACP,MAAM;GACN,UAAU;GACV,SAAS,CAAE;EACZ,EACF;EACD,QAAQ;EACR,kBAAkB;CACnB,EAAC;AAGF,KAAI,OAAO,QACT,QAAO,kBAAkB,MAAM,QAAQ,OAAO,QAAQ,GAAG,OAAO,UAAU,CAAC,OAAO,OAAQ;AAI5F,KAAI,cAAc,MAAM,YAAY,KAAK,SAAS,GAAG;AACnD,SAAO,UAAU,KAAK,YAAY;AAClC,SAAO,cAAc,KAAK,MAAM,YAAY,EAAE;CAC/C;AAED,QAAO,UAAU;AAEjB,QAAO;AACR;AAED,SAAgB,aAAaC,YAA6D;AACxF,KAAI,WAAW,QACb,QAAO;EACL,SAAS,WAAW;EACpB,MAAM,WAAW;CAClB;AAIH,QAAO;EACL,SAAS;EACT,MAAM,CAAC,gBAAiB;CACzB;AACF"}